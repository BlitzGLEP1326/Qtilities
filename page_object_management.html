<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: Object Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Object Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  cellpadding="0" style="width:100%;
  table-layout:fixed;
	margin:0px 0px 0px 0px;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;">
<tr>
<td style="width:80%; padding:0px 5px 0px 0px; vertical-align: text-top; text-align: left"><h1 style="margin:0px; padding:0px">Overview</h1>
<p></p>
<p>Qtilities provides an object manager which provides many object management features. The object manager is also responsible to provide a global object pool to the developer. This allows the registration of objects in the global object pool where other objects can access them or the interfaces they implement. This article will provide information on the different features of the object manager and the global object pool.</p>
<p>Table of contents:</p>
<ul>
<li><a class="el" href="page_object_management.html#accessing">The Object Manager</a></li>
<li><a class="el" href="page_object_management.html#features">Object Management Features</a><ul>
<li><a class="el" href="page_object_management.html#object_pool">The global object pool</a></li>
<li><a class="el" href="page_object_management.html#observer_features">Observer object management features</a></li>
<li><a class="el" href="page_object_management.html#meta_type_object_management">Global object activity management</a></li>
</ul>
</li>
<li><a class="el" href="page_object_management.html#object_property_management">Object Property Management</a><ul>
<li><a class="el" href="page_object_management.html#object_property_management_working">Working with object properties</a></li>
<li><a class="el" href="page_object_management.html#object_property_management_displaying">Displaying object properties</a></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td><td style="width:20%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
	margin:0px 0px 0px 0px; 
  width: 100%;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;
  background-color: #d1d3d4;">
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">First Steps</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_getting_started.html">Getting Started</a><br/>
</li>
<li><a href="page_the_basics.html">The Basics</a><br/>
</li>
<li><a href="page_examples_and_plugins.html">Examples and Plugins</a><br/>
   </li>
</ul>
</td></tr>
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Overviews</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_action_management.html">Action Management</a><br/>
</li>
<li><a href="page_tree_structures.html">Building Trees</a><br/>
</li>
<li><a href="page_debugging.html">Debugging Applications</a><br/>
</li>
<li><a href="page_extension_system.html">Extension System</a><br/>
</li>
<li><a href="page_factories.html">Factories</a><br/>
</li>
<li><a href="page_logging.html">Logging</a><br/>
</li>
<li><a href="page_modules_overview.html">Modules</a><br/>
</li>
<li><a href="page_object_management.html">Object Management</a><br/>
</li>
<li><a href="page_observers.html">Observers</a><br/>
</li>
<li><a href="page_observer_widgets.html">Observer Widgets</a><br/>
</li>
<li><a href="page_project_management.html">Project Management</a><br/>
</li>
<li><a href="page_tasking.html">Tasking</a><br/>
</li>
<li><a href="page_widget_set.html">Widget Set</a><br/>
   </li>
</ul>
</td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="accessing"></a>
The Object Manager</h1>
<p>The object manager implements the <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_object_manager.html" title="Interface used to communicate with the object manager, directly accessable through the OBJECT_MANAGER...">Qtilities::Core::Interfaces::IObjectManager</a> interface and can be accessed directly through the thread safe <code>OBJECT_MANAGER</code> macro or directly using <a class="el" href="class_qtilities_1_1_core_1_1_qtilities_core_application.html#af9c56b24665781a8efd3e3cc08b77388" title="Returns a reference to the observer manager.">Qtilities::Core::QtilitiesCoreApplication::objectManager()</a></p>
<p>For example:</p>
<div class="fragment"><div class="line">QObject* my_object = <span class="keyword">new</span> QObject();</div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(my_object);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Internally the global object pool is an observer which can be accessed like this:</span></div>
<div class="line">OBJECT_MANAGER-&gt;objectPool();</div>
</div><!-- fragment --><h1><a class="anchor" id="features"></a>
Object Management Features</h1>
<h2><a class="anchor" id="object_pool"></a>
The global object pool</h2>
<p>A global object pool is a powerful object management feature in an application, especially when the application is extensible through plugins. It allows objects to be registered in the pool and can then be searched and used in other parts of the application. The example below shows some example usages of the global object pool.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;IMyIFace.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Register an object in the global object pool</span></div>
<div class="line"><span class="comment">// This will emit the newObjectAdded(QObject*) signal on the object manager</span></div>
<div class="line">QObject* my_object = <span class="keyword">new</span> QObject();</div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(my_object);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Check which objects in the global object pool implements a specific interface (called &quot;IMyIFace&quot; in this example)</span></div>
<div class="line">QList&lt;QObject *&gt; iface_list;</div>
<div class="line">iface_list = OBJECT_MANAGER-&gt;registeredInterfaces(<span class="stringliteral">&quot;IMyIFace&quot;</span>);</div>
<div class="line"><span class="keywordflow">foreach</span> (QObject* obj, iface_list) {</div>
<div class="line">        IMyIFace* my_iface = qobject_cast&lt;IMyIFace*&gt; (obj);</div>
<div class="line">        <span class="keywordflow">if</span> (my_iface) {</div>
<div class="line">                <span class="comment">// Now you can access your interface.</span></div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment --><p>A good example of using the global object pool is the methodology behind how plugins are used in the Qtilities extension system. Plugins register objects in which the rest of the application might be interested during plugin initialization. Once all plugins were initialized, plugins initializes their dependencies where it will inspect the global object pool for registered objects in which it is interested in.</p>
<p>The <a class="el" href="namespace_qtilities_1_1_plugins_1_1_debug.html" title="Namespace containing all classes which is part of the debug plugin.">Qtilities::Plugins::Debug</a> plugin provides a visual overview of the global object pool state during runtime which simplifies debugging. This is shown in the image below:</p>
<div class="image">
<img src="debugging_object_pool_tab.jpg" alt="debugging_object_pool_tab.jpg"/>
<div class="caption">
Global Object Pool View In Debug Plugin</div></div>
 <h2><a class="anchor" id="observer_features"></a>
Observer object management features</h2>
<p>When attaching objects to observers, it is possible to specify the way the object should be managed in the observer context. The possible management options are defined in the <a class="el" href="class_qtilities_1_1_core_1_1_observer.html#aee321cdb07667b5fe20d03a59e9ff17e" title="The possible ownerships with which subjects can be attached to an observer.">Qtilities::Core::Observer::ObjectOwnership</a> enumeration. See the <a class="el" href="page_observers.html#object_lifetimes">Object lifetimes: Managing object lifetimes using observers</a> section of the <a class="el" href="page_observers.html">Observers</a> article for more information.</p>
<h2><a class="anchor" id="meta_type_object_management"></a>
Global object activity management</h2>
<p>The object manager provides functionality to manage global active objects in an application. Active objects can be set on a meta-type basis where the meta type is a simple QString used to identify the set of active objects. Active objects for a meta-type can be set using the <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_object_manager.html#abc411c5a8a03aa9094a91725cdcac753" title="Updates the active object(s) for a specific meta type.">Qtilities::Core::Interfaces::IObjectManager::setMetaTypeActiveObjects()</a> function. When this function is called the <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_object_manager.html#aa3305cfd669b166b88cb03566ea8d3f1" title="Signal which is emitted when the setMetaTypeActiveObjects() is finished.">Qtilities::Core::Interfaces::IObjectManager::metaTypeActiveObjectsChanged()</a> signal is emitted with the new set of active objects for the specified meta-type. The active objects for a meta-type can be accessed at any time using the <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_object_manager.html#a406cb571479fec30055da776dde0fea5" title="Returns the active object(s) for a specific meta type. If the meta type does not exist, an empty list is returned.">Qtilities::Core::Interfaces::IObjectManager::metaTypeActiveObjects()</a> function.</p>
<h1><a class="anchor" id="object_property_management"></a>
Object Property Management</h1>
<p>Qtilities provided various features related to QObject property management. The sections that follow will provide highlights of these features.</p>
<h2><a class="anchor" id="object_property_management_working"></a>
Working with object properties</h2>
<p>To make working with object properties easier, Qtilities comes with its own property classes which all inherit from <a class="el" href="class_qtilities_1_1_core_1_1_qtilities_property.html" title="The base class of all the different Qtilities property types.">Qtilities::Core::QtilitiesProperty</a>. This approach provides many advantages allowing you to control many aspects of the property. For example:</p>
<ul>
<li>QtilitiesProperty inherits from IExportable, thus you can define how properties must be exported.</li>
<li>We can make interesting property types, for example <a class="el" href="class_qtilities_1_1_core_1_1_multi_context_property.html" title="A MultiContextProperty provides a property which has different values in different contexts...">Qtilities::Core::MultiContextProperty</a> allows you to set a property on an object which has different values for different contexts. This is used extensively in Qtilities and is the foundation which allows objects to be attached to multiple observers at the same time.</li>
</ul>
<p>The object manager provides many functions which helps you to work with properties on QObjects. QtilitiesProperty based classes are meant to compliment normal QVariant properties which can be set on QObjects and all the property functions provided by the object manager supports normal QVariant properties as well as property classes inheriting from QtilitiesProperty.</p>
<p>Property related functionality on object manager includes:</p>
<ul>
<li>Cloning of properties between objects.</li>
<li>Comparison of properties between objects.</li>
<li>Exporting and importing of properties to and from both QDataStream and QDomDocument.</li>
<li>Checking if properties exist.</li>
<li>Easy set and get functions for QtilitiesProperty derived property classes.</li>
</ul>
<p>See the static functions on <a class="el" href="class_qtilities_1_1_core_1_1_object_manager.html" title="The ObjectManager provides object management features to the developer.">Qtilities::Core::ObjectManager</a> for more information.</p>
<h2><a class="anchor" id="object_property_management_displaying"></a>
Displaying object properties</h2>
<p>When Qtilities is built using the <code>QTILITIES_PROPERTY_BROWSER</code> define enabled, the following widgets allows you to inspect properties on objects at runtime.</p>
<h3><a class="anchor" id="object_property_management_displaying_qproperties"></a>
Displaying Q_PROPERTY properties</h3>
<p>The <a class="el" href="class_qtilities_1_1_core_gui_1_1_object_property_browser.html" title="The ObjectPropertyBrowser class provides an interface to the Qt Property Editor solution.">Qtilities::CoreGui::ObjectPropertyBrowser</a> allows you to inspect <code>Q_PROPERTY</code> properties on objects at runtime. The widget embedded in the debug plugin is shown below for an example object.</p>
<div class="image">
<img src="debugging_static_properties.jpg" alt="debugging_static_properties.jpg"/>
<div class="caption">
Static Properties Browser</div></div>
 <h3><a class="anchor" id="object_property_management_displaying_dynamic_properties"></a>
Displaying dynamic properties</h3>
<p>The Qtilities::CoreGui::DynamicObjectPropertyBrowser allows you to inspect dynamic properties on QObjects at runtime. This widget allows you to display the following type of properties:</p>
<ul>
<li>Normal QVariant QObject properties set using setProperty() on any QObject.</li>
<li><a class="el" href="class_qtilities_1_1_core_1_1_shared_property.html" title="A SharedProperty is a basic implementation of QtilitiesProperty.">Qtilities::Core::SharedProperty</a> properties.</li>
<li><a class="el" href="class_qtilities_1_1_core_1_1_multi_context_property.html" title="A MultiContextProperty provides a property which has different values in different contexts...">Qtilities::Core::MultiContextProperty</a> properties. Note that the property values for all contexts are displayed as shown below.</li>
</ul>
<p>The widget embedded in the debug plugin is shown below for an example object.</p>
<div class="image">
<img src="debugging_dynamic_properties.jpg" alt="debugging_dynamic_properties.jpg"/>
<div class="caption">
Dynamic Properties Browser</div></div>
</div></div><!-- contents -->
<br><br>
<table style="table-layout:auto; margin: auto; border-width:0px 0px 0px 0px; border-color:#7F7F7F; width:99%; border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES>
<tr>
<td style="vertical-align:text-top;align:left;width:45%">
<a href="https://github.com/JPNaude/Qtilities" title="Qtilities Repository">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a>
</td>
<td align="center" style="vertical-align:text-top;align:center;width10%">
<a href="#top" title="Back to top">Back to top</a>
</td>
<td style="vertical-align:text-top;text-align:right;width:45%">
Copyright &copy; 2009-2013, Jaco Naudé
<br><br>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="VJCCMP7GUHDVA">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</td>
</table>
<br>
<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
