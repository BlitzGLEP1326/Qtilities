<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: Observer Widgets</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Observer Widgets </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  cellpadding="0" style="width:100%;
  table-layout:fixed;
	margin:0px 0px 0px 0px;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;">
<tr>
<td style="width:80%; padding:0px 5px 0px 0px; vertical-align: text-top; text-align: left"><h1 style="margin:0px; padding:0px">Overview</h1>
<p></p>
<p>Qtilities provides a powerful implementation of the subject-observer pattern and an easy way to display the contents of such an observer context. The main class to use when viewing observers is <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html" title="The ObserverWidget class provides a ready-to-use widget to display information about a specific obser...">Qtilities::CoreGui::ObserverWidget</a>. The observer widget is able to show the contents as a tree widget or as a table widget and the user can specify the view which is required as a parameter in the constructor, or change the view at runtime. Observers provide hints to item views which specify how the context must be shown, what actions can be performed on the items in the context, what the access mode of the observer is etc.</p>
<p>This article will show how to use the observer widget class and how it is linked with the observer context it is displaying. Note that the <code>ObserverWidgetExample</code> example in the <code>QtilitiesExamples</code> project contains the code used in this article.</p>
<p>Table of contents:</p>
<ul>
<li><a class="el" href="page_observer_widgets.html#first_steps_observer_widgets">First steps: Creating your first observer widget</a><ul>
<li><a class="el" href="page_observer_widgets.html#table_view">Constructing the observer widget as a table view</a></li>
<li><a class="el" href="page_observer_widgets.html#selected_object_integration">Interacting with selected objects</a></li>
</ul>
</li>
<li><a class="el" href="page_observer_widgets.html#observer_and_widget_integration">Observer hints: Telling item views how they should show an observer context</a><ul>
<li><a class="el" href="page_observer_widgets.html#action_hints">Overview of different action hints</a></li>
<li><a class="el" href="page_observer_widgets.html#selection_control">Control over object selection</a></li>
<li><a class="el" href="page_observer_widgets.html#item_view_display">Control over which widgets appears in the observer widget</a></li>
<li><a class="el" href="page_observer_widgets.html#controlling_names">Controlling names</a></li>
<li><a class="el" href="page_observer_widgets.html#hierarchical_display">Hierarchical (categorized) display options</a></li>
<li><a class="el" href="page_observer_widgets.html#controlling_activity">Controlling activity</a></li>
<li><a class="el" href="page_observer_widgets.html#controlling_displayed_columns">Control over displayed columns</a></li>
<li><a class="el" href="page_observer_widgets.html#access_mode">Access mode and access mode scope</a></li>
<li><a class="el" href="page_observer_widgets.html#observer_widget_searching">Searching for objects inside the observer widget</a></li>
</ul>
</li>
<li><a class="el" href="page_observer_widgets.html#advanced_topics">Advanced topics</a><ul>
<li><a class="el" href="page_observer_widgets.html#widget_meta_types">Setting observer widget meta types</a></li>
<li><a class="el" href="page_observer_widgets.html#saving_state">Saving the state of different observer widgets</a></li>
<li><a class="el" href="page_observer_widgets.html#models_overview">The models doing the work behind the scenes</a></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td><td style="width:20%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
	margin:0px 0px 0px 0px; 
  width: 100%;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;
  background-color: #d1d3d4;">
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">First Steps</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_getting_started.html">Getting Started</a><br/>
</li>
<li><a href="page_the_basics.html">The Basics</a><br/>
</li>
<li><a href="page_examples_and_plugins.html">Examples and Plugins</a><br/>
   </li>
</ul>
</td></tr>
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Overviews</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_action_management.html">Action Management</a><br/>
</li>
<li><a href="page_tree_structures.html">Building Trees</a><br/>
</li>
<li><a href="page_debugging.html">Debugging Applications</a><br/>
</li>
<li><a href="page_extension_system.html">Extension System</a><br/>
</li>
<li><a href="page_factories.html">Factories</a><br/>
</li>
<li><a href="page_logging.html">Logging</a><br/>
</li>
<li><a href="page_modules_overview.html">Modules</a><br/>
</li>
<li><a href="page_object_management.html">Object Management</a><br/>
</li>
<li><a href="page_observers.html">Observers</a><br/>
</li>
<li><a href="page_observer_widgets.html">Observer Widgets</a><br/>
</li>
<li><a href="page_project_management.html">Project Management</a><br/>
</li>
<li><a href="page_tasking.html">Tasking</a><br/>
</li>
<li><a href="page_widget_set.html">Widget Set</a><br/>
   </li>
</ul>
</td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="first_steps_observer_widgets"></a>
First steps: Creating your first observer widget</h1>
<p>To create an observer widget is very simple, first we need an observer context and then we can initialize the observer widget for that observer context. We will use the same tree structure that was introduced in the <a class="el" href="page_tree_structures.html">Building Trees</a> article in here. Now lets look at an example where we construct that tree structure and create an observer widget for it.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QApplication&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;QtilitiesCoreGui&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>QtilitiesCoreGui;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">  QtilitiesApplication a(argc, argv);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create a tree using TreeNode, a class inheriting Observer:</span></div>
<div class="line">  TreeNode* rootNode = <span class="keyword">new</span> TreeNode(<span class="stringliteral">&quot;Root&quot;</span>);</div>
<div class="line">  TreeNode* nodeA = rootNode-&gt;addNode(<span class="stringliteral">&quot;Node A&quot;</span>);</div>
<div class="line">  TreeNode* nodeB = rootNode-&gt;addNode(<span class="stringliteral">&quot;Node B&quot;</span>);</div>
<div class="line">  rootNode-&gt;addItem(<span class="stringliteral">&quot;Child 1&quot;</span>);</div>
<div class="line">  rootNode-&gt;addItem(<span class="stringliteral">&quot;Child 2&quot;</span>);</div>
<div class="line">  nodeA-&gt;addItem(<span class="stringliteral">&quot;Child 3&quot;</span>);</div>
<div class="line">  nodeA-&gt;addItem(<span class="stringliteral">&quot;Child 4&quot;</span>);</div>
<div class="line">  nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 5&quot;</span>);</div>
<div class="line">  nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 6&quot;</span>);</div>
<div class="line">  nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 7&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Create the observer widget, set its context and then initialize it</span></div>
<div class="line">  ObserverWidget* observer_widget = <span class="keyword">new</span> ObserverWidget();</div>
<div class="line">  QtilitiesApplication::setMainWindow(observer_widget);</div>
<div class="line">  observer_widget-&gt;setObserverContext(rootNode);</div>
<div class="line">  observer_widget-&gt;initialize();</div>
<div class="line">  observer_widget-&gt;show();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Access the QTableView like this in TableView mode:</span></div>
<div class="line">  <span class="comment">// observer_widget-&gt;tableView();</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --><p>The above application produces the following widget:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_simple.jpg" alt="observer_widget_doc_tree_view_simple.jpg"/>
<div class="caption">
Observer Widget (Tree View Mode)</div></div>
 <h2><a class="anchor" id="table_view"></a>
Constructing the observer widget as a table view</h2>
<p>Observer widgets are by default initialized as tree widgets. However we can decide we want a table view rather than a tree view by passing the correct parameter in the observer widget constructor. For example:</p>
<div class="fragment"><div class="line">ObserverWidget* observer_widget = <span class="keyword">new</span> ObserverWidget(<a class="code" href="namespace_qtilities.html#ae2ce7221f0ad3fd3c7109b8350ad3caca847e7b5cdde6d6de03a323ee07ad7fb3">Qtilities::TableView</a>);</div>
</div><!-- fragment --><p>The resulting widget looks like this:</p>
<div class="image">
<img src="observer_widget_doc_table_view_simple.jpg" alt="observer_widget_doc_table_view_simple.jpg"/>
<div class="caption">
Observer Widget (Table View Mode)</div></div>
<p> For flat observer structures the above widget would be sufficient, however for hierarchical tree structures such as the example structure we are using, this is not going to work. The user must be able to push down into an observer and push up the tree as well. In order to do this, we need to add actions for to the observer widget which the user can then use to perform these tasks. We use <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html" title="The ObserverHints class contains display hints for an Observer class.">Qtilities::Core::ObserverHints</a> to do this. Observer hints are described in detail later in this article in the <a class="el" href="page_observer_widgets.html#observer_and_widget_integration">Observer hints: Telling item views how they should show an observer context</a> section. For now we don't go into the details.</p>
<div class="fragment"><div class="line"><span class="comment">// Indicate to the widget that it should use its own hints, not that of the selected observer:</span></div>
<div class="line">observer_widget-&gt;toggleUseObserverHints(<span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Tell the observer widget which actions it must display:</span></div>
<div class="line">ObserverHints::ActionHints action_hints = 0;</div>
<div class="line">action_hints |= ObserverHints::ActionPushDown;</div>
<div class="line">action_hints |= ObserverHints::ActionPushUp;</div>
<div class="line">action_hints |= ObserverHints::ActionSwitchView;</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setActionHints(action_hints);</div>
<div class="line"></div>
<div class="line"><span class="comment">// We also tell the widget that we want a toolbar with the actions at the top of the widget:</span></div>
<div class="line">ObserverHints::DisplayFlags display_flags = 0;</div>
<div class="line">display_flags |= ObserverHints::ItemView;</div>
<div class="line">display_flags |= ObserverHints::NavigationBar;</div>
<div class="line">display_flags |= ObserverHints::ActionToolBar;</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setDisplayFlagsHint(display_flags);</div>
</div><!-- fragment --><p>These additions will result in the observer widget shown below:</p>
<div class="image">
<img src="observer_widget_doc_table_view_push_hints.jpg" alt="observer_widget_doc_table_view_push_hints.jpg"/>
<div class="caption">
Observer Widget With Action Toolbar</div></div>
<p> A third action, specified by <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#a14bfdb76e48c0a9fae7823fc314ab672ab81fa07a20b8eef6161d534f7ba9f181">Qtilities::Core::ObserverHints::ActionSwitchView</a> was also added to our example. When this action is present the user can switch the type of view at runtime. Lastly, observer widgets automatically provide actions to expand or collapse tree structures when the observer widget is in the tree mode. In the above widget they are not shown since the observer widget is in table mode.</p>
<h2><a class="anchor" id="selected_object_integration"></a>
Interacting with selected objects</h2>
<p>The observer widget class provides functions which makes it easy to interact with selected objects in the item view presented to the user. It is possible to retrieve selected objects at any time using the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#aed3304debc222499a43f55a808617330" title="Provides a list of QObject pointers to all the selected objects.">Qtilities::CoreGui::ObserverWidget::selectedObjects()</a> function. The <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#aa58f7f0341ccf5be518c22380359fa65" title="Signal which is emitted when object selection changes.">Qtilities::CoreGui::ObserverWidget::selectedObjectsChanged()</a> signal is emitted when the active objects changes and the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#a12634d9315bd74caf1a30cee82e8e480" title="Signal which is emitted when the observer context of this widget changes.">Qtilities::CoreGui::ObserverWidget::observerContextChanged()</a> signal is emitted as soon as the observer context in the widget change. This would happen for example when the user push down into a tree hierarchy.</p>
<h1><a class="anchor" id="observer_and_widget_integration"></a>
Observer hints: Telling item views how they should show an observer context</h1>
<p>Observers can provide display hints to any observer widgets in which it is displayed. The available hints are defined in the form of the <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html" title="The ObserverHints class contains display hints for an Observer class.">Qtilities::Core::ObserverHints</a> class and are explained in this section. Observer widgets automatically follow the hints of the widget's current observer context if the context provides hints. It is however possible to turn this feature off using the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#a7bc0064cc07145b4641bf6e54d9462f2" title="Function to toggle usage of hints from the active parent observer. If not default hints will be used...">Qtilities::CoreGui::ObserverWidget::toggleUseObserverHints()</a> function and then set the hints explicitly using the Qtilities::CoreGui::ObserverWidget::setActiveHints() function as shown in the above example.</p>
<p>Observers does not automatically provide hints and the <a class="el" href="class_qtilities_1_1_core_1_1_observer.html#ae61374a82580a82b344f599dec661fe0" title="Function which constructs hints for this observer.">Qtilities::Core::Observer::useDisplayHints()</a> function must be called on the observer after it is constructed and before any subjects are attached to it. <a class="el" href="class_qtilities_1_1_core_gui_1_1_tree_node.html" title="The TreeNode class is a node in a tree which can have items attached to it and can also be attached t...">Qtilities::CoreGui::TreeNode</a> on the other hand calls this function in its constructor.</p>
<p>The hints are interpreted when the observer widget is initialized, thus they must be set before the initialization function call on the observer widget. The rest of this section will explore the different hints.</p>
<h2><a class="anchor" id="action_hints"></a>
Overview of different action hints</h2>
<p>Action hints are hints which tells observer widgets which actions must be available for a specific context. The observer widget class implements the <a class="el" href="class_qtilities_1_1_core_gui_1_1_interfaces_1_1_i_action_provider.html" title="An interface through which objects can provide actions to other objects.">Qtilities::CoreGui::Interfaces::IActionProvider</a> interface through which it provides all the actions for a specific observer context. Actions are created as needed during initialization calls on the observer widget, thus if an observer context does not provide any action hints, no actions will be created and the interface will provide an empty list of actions. The possible action hints are defined in the <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#a14bfdb76e48c0a9fae7823fc314ab672" title="The possible actions which views can perform on an observer. The ObserverWidget class provides the ap...">Qtilities::Core::ObserverHints::ActionItem</a> enumeration.</p>
<h2><a class="anchor" id="selection_control"></a>
Control over object selection</h2>
<p>If is possible to control if objects can be selected in the observer widget. For more information see <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#aaa064344e116a7f23a42783b42934838" title="Sets the selection control hint.">Qtilities::Core::ObserverHints::setItemSelectionControlHint()</a> and <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#a5c04c665ae41c6d4ba5337067d1ea5ea" title="Gets the selection control hint.">Qtilities::Core::ObserverHints::itemSelectionControlHint()</a>.</p>
<h2><a class="anchor" id="item_view_display"></a>
Control over which widgets appears in the observer widget</h2>
<p>In the examples thus far we only showed the item view (table or tree view) and for table views an navigation bar and an action toolbar at the top of the widget. It is possible to control this through the <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#a95d14530c9a781f914c43ef42c88872b" title="Function to set display flags hint.">Qtilities::Core::ObserverHints::setDisplayFlagsHint()</a> and <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#af35c61a74dac082735348ee21d201951" title="Function to get current display flags hint.">Qtilities::Core::ObserverHints::displayFlagsHint()</a> functions as shown already.</p>
<p>Lets modify our example to also display a <a class="el" href="class_qtilities_1_1_core_gui_1_1_object_property_browser.html" title="The ObjectPropertyBrowser class provides an interface to the Qt Property Editor solution.">Qtilities::CoreGui::ObjectPropertyBrowser</a> through which users can edit Q_PROPERTY properties of the selected object.</p>
<div class="fragment"><div class="line"><span class="comment">// We need to tell all three observers that they should provide hints for the actions we want to observer widgets displaying them</span></div>
<div class="line">ObserverHints::DisplayFlags display_flags = 0;</div>
<div class="line">display_flags |= ObserverHints::ItemView;</div>
<div class="line">display_flags |= ObserverHints::NavigationBar;</div>
<div class="line">display_flags |= ObserverHints::PropertyBrowser;</div>
<div class="line">display_flags |= ObserverHints::ActionToolBar;</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setDisplayFlagsHint(display_flags);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Before the observer widget initialization we can specify where the editor should be, and of what type the editor must be:</span></div>
<div class="line">observer_widget-&gt;setPreferredPropertyEditorDockArea(Qt::RightDockWidgetArea);</div>
<div class="line">observer_widget-&gt;setPreferredPropertyEditorType(ObjectPropertyBrowser::TreeBrowser);</div>
<div class="line"></div>
<div class="line"><span class="comment">// After the observer widget was initialized we can access the property editor and call functions on it:</span></div>
<div class="line"><span class="keywordflow">if</span> (observer_widget-&gt;propertyBrowser()) {</div>
<div class="line">  QStringList filter_list;</div>
<div class="line">  filter_list &lt;&lt; <span class="stringliteral">&quot;QObject&quot;</span>;</div>
<div class="line">  observer_widget-&gt;propertyBrowser()-&gt;setFilterList(filter_list);</div>
<div class="line">}</div>
</div><!-- fragment --><p>These additions will result in the observer widget shown below:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_property_editor.jpg" alt="observer_widget_doc_tree_view_property_editor.jpg"/>
<div class="caption">
Observer Widget With Property Browser</div></div>
 <h2><a class="anchor" id="controlling_names"></a>
Controlling names</h2>
<p>The <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#acc23fc5678ee209779323d2764111291" title="Sets the naming control hint.">Qtilities::Core::ObserverHints::setNamingControlHint()</a> function can be called to provide a hint which will determine if object names should be editable or not. The <a class="el" href="class_qtilities_1_1_core_gui_1_1_naming_policy_filter.html" title="The NamingPolicyFilter class is an implementation of AbstractSubjectFilter which allows control over ...">Qtilities::CoreGui::NamingPolicyFilter</a> was created to help with name management inside an observer context and when a context with a naming policy filter installed is set as the observer context of an observer widget, the naming policy filter will automatically be used to help with name management by providing a <a class="el" href="class_qtilities_1_1_core_gui_1_1_naming_policy_delegate.html" title="The NamingPolicyDelegate class provides a ready-to-use delegate to edit the names of subjects attache...">Qtilities::CoreGui::NamingPolicyDelegate</a> delegate which is used during the editing of object names.</p>
<p>Lets adapt our example by installing a naming policy filter set to use unique names to our top level observer, and we set the naming control hint on the observer to editable names.</p>
<div class="fragment"><div class="line"><span class="comment">// Enable naming control on the root node:</span></div>
<div class="line"><span class="comment">// Note: This must be done before attaching any objects to it.</span></div>
<div class="line">rootNode-&gt;enableNamingControl(ObserverHints::EditableNames,NamingPolicyFilter::ProhibitDuplicateNames);</div>
</div><!-- fragment --><p>The image below shows what happens when we want to change an object name inside the top level observer context to the name of an existing object.</p>
<div class="image">
<img src="observer_widget_doc_tree_view_naming_delegate.jpg" alt="observer_widget_doc_tree_view_naming_delegate.jpg"/>
<div class="caption">
Observer Widget Handling Context Naming Policies</div></div>
 <h2><a class="anchor" id="hierarchical_display"></a>
Hierarchical (categorized) display options</h2>
<p>An useful feature of the <a class="el" href="class_qtilities_1_1_core_1_1_observer.html" title="The observer class is an extended implementation of an observer in the subject-observer pattern...">Qtilities::Core::Observer</a> class is that it supports the grouping of objects within the context into categories. Lets change our example again by adding intended categories for objects that we attach to <code>nodeB</code>.</p>
<div class="fragment"><div class="line">nodeB-&gt;enableCategorizedDisplay();</div>
<div class="line">nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 5&quot;</span>,QtilitiesCategory(<span class="stringliteral">&quot;Category 1&quot;</span>));</div>
<div class="line">nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 6&quot;</span>,QtilitiesCategory(<span class="stringliteral">&quot;Category 2&quot;</span>));</div>
<div class="line">nodeB-&gt;addItem(<span class="stringliteral">&quot;Child 7&quot;</span>,QtilitiesCategory(<span class="stringliteral">&quot;Category 2&quot;</span>));</div>
</div><!-- fragment --><p>These changes will result in the observer widget shown below (in tree mode):</p>
<div class="image">
<img src="observer_widget_doc_tree_view_categorized.jpg" alt="observer_widget_doc_tree_view_categorized.jpg"/>
<div class="caption">
Observer Widget With Categories (Tree View Mode)</div></div>
<p> In table view mode the categories are shown in an extra column. To enable this column we need to specify the correct column hint:</p>
<div class="fragment"><div class="line">observer_widget-&gt;activeHints()-&gt;setItemViewColumnHint(ObserverHints::ColumnNameHint | ObserverHints::ColumnCategoryHint);</div>
</div><!-- fragment --><p>Columns are described in more detail in the <a class="el" href="page_observer_widgets.html#controlling_displayed_columns">Control over displayed columns</a> section.</p>
<div class="image">
<img src="observer_widget_doc_table_view_categorized.jpg" alt="observer_widget_doc_table_view_categorized.jpg"/>
<div class="caption">
Observer Widget With Categories (Table View Mode)</div></div>
<p> It is possible to filter the displayed categories as well. As with all the other display hints we can either set the filtering parameters on the Observer itself, or on the display hints of the ObserverWidget when we don't use observer hints in the widget. In our example thus far we are using custom hints, thus we set the filtering parameters on the <code>activeHints()</code> of the ObserverWidget (which points to our custom hints).</p>
<div class="fragment"><div class="line">QList&lt;QtilitiesCategory&gt; displayed_categories;</div>
<div class="line">displayed_categories &lt;&lt; QtilitiesCategory(<span class="stringliteral">&quot;Category 1&quot;</span>);</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setDisplayedCategories(displayed_categories);</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setCategoryFilterEnabled(<span class="keyword">true</span>);</div>
</div><!-- fragment --><p>After adding the category filter, the observer widget looks this:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_category_filter.jpg" alt="observer_widget_doc_tree_view_category_filter.jpg"/>
<div class="caption">
Observer Widget With Filtered Categories (Tree View Mode)</div></div>
 <h2><a class="anchor" id="controlling_activity"></a>
Controlling activity</h2>
<p>In the same way that observer widgets integrate with naming policy filters, automatic integration with activity policy filters also happens when an observer context displayed has a <a class="el" href="class_qtilities_1_1_core_1_1_activity_policy_filter.html" title="The ActivityPolicyFilter class is an implementation of AbstractSubjectFilter which allows control ove...">Qtilities::Core::ActivityPolicyFilter</a> installed. Observers can provide two hints related to activity control: a hint indicating how activity must be displayed (see <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#a4920b4a3fab024cac000290e4d8caecd" title="The possible activity display hints.">Qtilities::Core::ObserverHints::ActivityDisplay</a>) and a hint indicating how activity changes should happen (see <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#aad31c5485e38b0a4853a136d17716f5f" title="The possible activity control hints.">Qtilities::Core::ObserverHints::ActivityControl</a>).</p>
<p>Lets adapt our example by installing an activity policy filter on <code>rootNode</code> and <code>nodeA</code> using the convenience functions of <a class="el" href="class_qtilities_1_1_core_gui_1_1_tree_node.html" title="The TreeNode class is a node in a tree which can have items attached to it and can also be attached t...">Qtilities::CoreGui::TreeNode</a>.</p>
<div class="fragment"><div class="line">rootNode-&gt;enableActivityControl(ObserverHints::CheckboxActivityDisplay,ObserverHints::CheckboxTriggered);</div>
<div class="line">nodeA-&gt;enableActivityControl(ObserverHints::CheckboxActivityDisplay,ObserverHints::CheckboxTriggered);</div>
</div><!-- fragment --><p>After adding the activity filter, the observer widget will look like this:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_activity_control.jpg" alt="observer_widget_doc_tree_view_activity_control.jpg"/>
<div class="caption">
Observer Widget Handling Context Activity Policy</div></div>
<p> The <a class="el" href="class_qtilities_1_1_core_1_1_activity_policy_filter.html" title="The ActivityPolicyFilter class is an implementation of AbstractSubjectFilter which allows control ove...">Qtilities::Core::ActivityPolicyFilter</a> class also provides other activity management options which allows control over the activity of subjects within an observer context. It is up to the reader to explore the other activity control options.</p>
<h2><a class="anchor" id="controlling_displayed_columns"></a>
Control over displayed columns</h2>
<p>The <a class="el" href="class_qtilities_1_1_core_1_1_observer_hints.html#af297298c60cd9f74bbf2af774a1b0a30" title="The possible item view column hints.">Qtilities::Core::ObserverHints::ItemViewColumn</a> hint provides control over pre-defined columns that can be shown in the observer widget. Lets enable all columns and look at the resulting observer widget.</p>
<div class="fragment"><div class="line"><span class="comment">// We need to set the item view column hint on our observer:</span></div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setItemViewColumnHint(ObserverHints::ColumnAllHints);</div>
</div><!-- fragment --><p>After setting the item view column hint, the observer widget will look like this:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_columns.jpg" alt="observer_widget_doc_tree_view_columns.jpg"/>
<div class="caption">
Observer Widget With All Columns Enabled</div></div>
<p> It is easy to extend an observer widget with custom columns. The <a class="el" href="namespace_qtilities_1_1_examples_1_1_clipboard.html" title="Namespace containing all the classes which forms part of the Clipboard Example.">Qtilities::Examples::Clipboard</a> example demonstrates this. Also see the following section of this article: <a class="el" href="page_observer_widgets.html#models_overview">The models doing the work behind the scenes</a>.</p>
<h2><a class="anchor" id="access_mode"></a>
Access mode and access mode scope</h2>
<p>Observer access modes provides the ability to control the changes which can be made to an observer and are defined in the <a class="el" href="class_qtilities_1_1_core_1_1_observer.html#a62e08632625c83703a4e5864ff83f374" title="The possible access modes of the observer.">Qtilities::Core::Observer::AccessMode</a> enumeration. Observers provide the ability to specify access modes on a global scope or on a category level through the <a class="el" href="class_qtilities_1_1_core_1_1_observer.html#a546182e85f9c9800adb6eae244aa9412" title="Function to set the observer&#39;s access mode scope.">Qtilities::Core::Observer::setAccessModeScope()</a> function. Again, lets modify our example by setting the access mode of the observers in the example (Note that we do this after the attachments for our example).</p>
<div class="fragment"><div class="line"><span class="comment">// Set access modes. This must be done after we attached objects to these nodes.</span></div>
<div class="line">nodeA-&gt;setAccessMode(Observer::ReadOnlyAccess);</div>
<div class="line">nodeB-&gt;setAccessMode(Observer::LockedAccess);</div>
</div><!-- fragment --><p>The resulting observer widget is shown below. It must be noted that the ColumnAccess item view column must be provided by the observer context:</p>
<div class="image">
<img src="observer_widget_doc_tree_view_access_modes.jpg" alt="observer_widget_doc_tree_view_access_modes.jpg"/>
<div class="caption">
Observer Widget Handling Observer Access Mode (Tree View Mode)</div></div>
<p> The table mode's hierarchy navigation bar goes a step further and colors the name of a read only context in red as a direct indication that the context is read only.</p>
<div class="image">
<img src="observer_widget_doc_table_view_access_modes.jpg" alt="observer_widget_doc_table_view_access_modes.jpg"/>
<div class="caption">
Observer Widget Handling Observer Access Mode (Table View Mode)</div></div>
 <h2><a class="anchor" id="observer_widget_searching"></a>
Searching for objects inside the observer widget</h2>
<p>Observer widgets can automatically show a search box widget embedded at the bottom of the widget when the active hints specifies that finding items is supported.</p>
<div class="fragment"><div class="line">ObserverHints::ActionHints active_hints = observer_widget-&gt;activeHints()-&gt;actionHints();</div>
<div class="line">active_hints |= ObserverHints::ActionFindItem;</div>
<div class="line">observer_widget-&gt;activeHints()-&gt;setActionHints(active_hints);</div>
</div><!-- fragment --><p>The resulting widget will display a find action, and when clicked it will provide an integrated <a class="el" href="class_qtilities_1_1_core_gui_1_1_search_box_widget.html" title="The SearchBoxWidget class provides a ready to use search/replace widget.">Qtilities::CoreGui::SearchBoxWidget</a> to the user.</p>
<div class="image">
<img src="observer_widget_doc_tree_view_searching.jpg" alt="observer_widget_doc_tree_view_searching.jpg"/>
<div class="caption">
Observer Widget Search Functionality</div></div>
 <h1><a class="anchor" id="advanced_topics"></a>
Advanced topics</h1>
<h2><a class="anchor" id="widget_meta_types"></a>
Setting observer widget meta types</h2>
<p>The Qtilities object manager is able to manage global active objects, for more information see <a class="el" href="page_object_management.html#meta_type_object_management">Global object activity management</a>. The observer widget class can integrate with the object manager and the meta type which is used for a specific observer widget can be set using the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#af6287a981442cc24fae9f66976f40536" title="Sets the global meta type used for this observer widget.">Qtilities::CoreGui::ObserverWidget::setGlobalMetaType()</a> function.</p>
<h2><a class="anchor" id="saving_state"></a>
Saving the state of different observer widgets</h2>
<p>The ObserverWidget class provides the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#a10a83467432713ba0480d825a7d44f88" title="Slot connected to QCoreApplication::aboutToQuit() signal.">Qtilities::CoreGui::ObserverWidget::writeSettings()</a> and <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#a5edf450be29ba76e85ce07bdfd1319a7" title="Restores the widget to a previous state.">Qtilities::CoreGui::ObserverWidget::readSettings()</a> functions which can be used to store information about an observer widget.</p>
<p><a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html#a53a80843c104b377af6fcaa04cf2e437" title="Gets the global meta type used for this observer widget.">Qtilities::CoreGui::ObserverWidget::globalMetaType()</a> is used as the <code>Widget_Name</code> field in the group where the settings are stored. Observer widget classes are connected to the <a class="el" href="class_qtilities_1_1_core_1_1_qtilities_core_application.html#aa3421d9d1a8a8506efea4e99451fd9be" title="Signal which broadcasts that settings identified by the request_id changed and requires updating...">Qtilities::Core::QtilitiesCoreApplication::settingsUpdateRequest()</a> signal by default and responds to settings update requests for the specific global meta type. See the function documentation for more details on this topic. See the <code>ClipboardExample</code> in the <code>QtilitiesExamples</code> project for a demonstration of how observer widget settings are managed.</p>
<p>For more information on this see <a class="el" href="class_qtilities_1_1_core_gui_1_1_configuration_widget.html#configuration_widget_storage_layout">Configuration settings storage in Qtilities</a>.</p>
<h2><a class="anchor" id="models_overview"></a>
The models doing the work behind the scenes</h2>
<p>Depending on the mode in which the observer widget is, it uses data models designed specifically for the observer implementation. In tree mode, the model doing the work is <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_tree_model.html" title="The ObserverTreeModel class provides an ready-to-use model that can be used to show the children of a...">Qtilities::CoreGui::ObserverTreeModel</a>, and in table mode <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_table_model.html" title="The ObserverTableModel class provides an ready-to-use model that can be used to show the contents of ...">Qtilities::CoreGui::ObserverTableModel</a> is used.</p>
<p>It is possible to extend models pretty easily. Again, see the <code>ClipboardExample</code> in the <code>QtilitiesExamples</code> project for more information, more specifically see the <a class="el" href="class_qtilities_1_1_examples_1_1_clipboard_1_1_extended_observer_table_model.html" title="The ExtendedObserverTableModel class is an example of how Qtilities::CoreGui::ObserverTableModel can ...">Qtilities::Examples::Clipboard::ExtendedObserverTableModel</a> and <a class="el" href="class_qtilities_1_1_examples_1_1_clipboard_1_1_extended_observer_tree_model.html" title="The ExtendedObserverTreeModel class is an example of how Qtilities::CoreGui::ObserverTableModel can b...">Qtilities::Examples::Clipboard::ExtendedObserverTreeModel</a> classes. </p>
</div></div><!-- contents -->
<br><table style="table-layout:auto;	margin: auto; 	border-width:0px 0px 0px 0px; 	border-color:#7F7F7F; 	width:99%;	border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES><tr><td style="align: left;width:45%"><a href="http://github.com/JPNaude/Qtilities" title="Qtilities Repository">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a></td><td style="align: center;width:10%"><a href="#top" title="Back to top">Back to top</a> </td><td style="text-align: right;width:45%">Copyright &copy; 2009-2013, Jaco Naude</tr></table><br><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
