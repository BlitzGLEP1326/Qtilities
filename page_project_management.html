<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: Project Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Project Management </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  cellpadding="0" style="width:100%;
  table-layout:fixed;
	margin:0px 0px 0px 0px;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;">
<tr>
<td style="width:80%; padding:0px 5px 0px 0px; vertical-align: text-top; text-align: left"><h1 style="margin:0px; padding:0px">Overview</h1>
<p></p>
<p>Projects forms a vital part of most software packages. It allows the user to save the current state of an application to a file and later restore the state of the application from the saved state. Qtilities provides a library dedicated to project management which can easily be added to any Qt application.</p>
<p>Table of contents:</p>
<ul>
<li><a class="el" href="page_project_management.html#project_structure">The structure of a Qtilities project</a></li>
<li><a class="el" href="page_project_management.html#project_management_first_steps">First steps: Setting up the project manager</a><ul>
<li><a class="el" href="page_project_management.html#initialize_finalize">Initializing and finalizing the project manager</a></li>
<li><a class="el" href="page_project_management.html#project_items">Registering project items in the project manager</a></li>
<li><a class="el" href="page_project_management.html#project_file_version">Project file type and versioning</a></li>
</ul>
</li>
<li><a class="el" href="page_project_management.html#using_projects">Projects in action: Using projects in your application</a><ul>
<li><a class="el" href="page_project_management.html#working_with_projects">Working with projects (creating, saving and loading)</a></li>
<li><a class="el" href="page_project_management.html#project_options">Project management options</a></li>
<li><a class="el" href="page_project_management.html#observer_project_items">Adding other classes as project items</a></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td><td style="width:20%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
	margin:0px 0px 0px 0px; 
  width: 100%;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;
  background-color: #d1d3d4;">
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">First Steps</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_getting_started.html">Getting Started</a><br/>
</li>
<li><a href="page_the_basics.html">The Basics</a><br/>
</li>
<li><a href="page_examples_and_plugins.html">Examples and Plugins</a><br/>
   </li>
</ul>
</td></tr>
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Overviews</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_action_management.html">Action Management</a><br/>
</li>
<li><a href="page_tree_structures.html">Building Trees</a><br/>
</li>
<li><a href="page_debugging.html">Debugging Applications</a><br/>
</li>
<li><a href="page_extension_system.html">Extension System</a><br/>
</li>
<li><a href="page_factories.html">Factories</a><br/>
</li>
<li><a href="page_logging.html">Logging</a><br/>
</li>
<li><a href="page_modules_overview.html">Modules</a><br/>
</li>
<li><a href="page_object_management.html">Object Management</a><br/>
</li>
<li><a href="page_observers.html">Observers</a><br/>
</li>
<li><a href="page_observer_widgets.html">Observer Widgets</a><br/>
</li>
<li><a href="page_project_management.html">Project Management</a><br/>
</li>
<li><a href="page_tasking.html">Tasking</a><br/>
</li>
<li><a href="page_widget_set.html">Widget Set</a><br/>
   </li>
</ul>
</td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="project_structure"></a>
The structure of a Qtilities project</h1>
<p>A project is a class which implements the <a class="el" href="class_qtilities_1_1_project_management_1_1_interfaces_1_1_i_project.html" title="Interface through which the project manager communicates with projects.">Qtilities::ProjectManagement::Interfaces::IProject</a> interface. Each project can consist of any number of project items. Project items are classes which implement the <a class="el" href="class_qtilities_1_1_project_management_1_1_interfaces_1_1_i_project_item.html" title="Interface through which objects can be exposed as project parts.">Qtilities::ProjectManagement::Interfaces::IProjectItem</a> interface. The <a class="el" href="class_qtilities_1_1_project_management_1_1_project_manager.html" title="The ProjectManager class.">Qtilities::ProjectManagement::ProjectManager</a> singleton is responsible to manage open projects. At present only one project can be open (active) at any time.</p>
<p>The diagram below shows this structure graphically.</p>
<div class="image">
<img src="project_structure.jpg" alt="project_structure.jpg"/>
<div class="caption">
Project Structure</div></div>
 <h1><a class="anchor" id="project_management_first_steps"></a>
First steps: Setting up the project manager</h1>
<h2><a class="anchor" id="initialize_finalize"></a>
Initializing and finalizing the project manager</h2>
<p>The project manager provides macros to initialize it on application startup and to finalize the manager when the application exists. During initialization the project manager will restore its settings from the previous session and load the last project if needed, or create a new project if needed. The finalization does the opposite: it saves the current settings and checks if the open project (if any) must be saved before exit. Lets look at the correct way to initialize and finalize the project manager:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtilitiesProjectManagement&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>Qtilities::CoreGui;</div>
<div class="line"><span class="keyword">using namespace </span>Qtilities::ProjectManagement;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">  QtilitiesApplication a(argc, argv);   </div>
<div class="line"></div>
<div class="line">  <span class="comment">// Add project items in the application to the project manager.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize the project manager:</span></div>
<div class="line">  PROJECT_MANAGER_INITIALIZE();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Register project management config page. If the configuration widget is used in the application this is needed, if not you can skip this line.</span></div>
<div class="line">  OBJECT_MANAGER-&gt;registerObject(PROJECT_MANAGER-&gt;configWidget());</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> result = a.exec();</div>
<div class="line">  PROJECT_MANAGER_FINALIZE();</div>
<div class="line">  <span class="keywordflow">return</span> results;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="project_items"></a>
Registering project items in the project manager</h2>
<p>Project items must be added to the project manager before initialization. When the project manager creates a new project it will attach all known project items to the project. The recommended way to do this is to register all your project items in the global object pool (see <a class="el" href="page_object_management.html">Object Management</a> for more information on this topic) and then get all the project items once the application is stable (all plugins were initialized etc.). When using the <a class="el" href="namespace_qtilities_1_1_plugins_1_1_project_management.html" title="Namespace containing all classes which is part of the ProjectManagement plugin.">Qtilities::Plugins::ProjectManagement</a> plugin in the <code>QtilitiesPlugins</code> project this will be done automatically when the plugin initializes its dependencies. Alternatively when not using the plugin, <code>PROJECT_MANAGER-&gt;refreshPartList()</code> can be used to inspect the object pool.</p>
<h2><a class="anchor" id="project_file_version"></a>
Project file type and versioning</h2>
<p>The project manager is able to save projects in either binary or XML formats where the suffices used for these different types can be set as follows:</p>
<div class="fragment"><div class="line">PROJECT_MANAGER-&gt;setDefaultProjectType(IExportable::XML);</div>
<div class="line">PROJECT_MANAGER-&gt;setAllowedProjectTypes(IExportable::XML);</div>
<div class="line"><span class="comment">// Lets say we want our project files to be save with the following extension: my_file.my_project_suffix</span></div>
<div class="line">PROJECT_MANAGER-&gt;setProjectTypeSuffix(IExportable::XML,<span class="stringliteral">&quot;my_project_suffix&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Once the project type parameters were set, we can initialize the project manager.</span></div>
<div class="line">PROJECT_MANAGER_INITIALIZE();</div>
</div><!-- fragment --><p>Qtilities make it easy to control different versions of project files since projects implement <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_exportable.html" title="Objects can implement this interface if they are able to export and reconstruct themselves.">Qtilities::Core::Interfaces::IExportable</a> which supports different versions of output formats. See the <code>IExportable</code> class documentation for a complete example of how the versioning implementation works.</p>
<h1><a class="anchor" id="using_projects"></a>
Projects in action: Using projects in your application</h1>
<h2><a class="anchor" id="working_with_projects"></a>
Working with projects (creating, saving and loading)</h2>
<p>The project manager can manage one open project at a time, accessible through <a class="el" href="class_qtilities_1_1_project_management_1_1_project_manager.html#a94f066e6844f2eac5dd1ada0a21144f9" title="Returns an interface to the current project.">Qtilities::ProjectManagement::ProjectManager::currentProject()</a>. If no project is open, a new project can be created using <a class="el" href="class_qtilities_1_1_project_management_1_1_project_manager.html#a67af9b44e58f96d2c2da5660cc9bd2fe" title="Creates a new project.">Qtilities::ProjectManagement::ProjectManager::newProject()</a>. This function can also be used to create a new project, thus closing and prompting to save the current project (if necessary) and creating a new project. If the current project must be closed without creating a new project call the <a class="el" href="class_qtilities_1_1_project_management_1_1_project_manager.html#a1bb1f11f88ba1165d9d76fcfd7e92e86" title="Close the current project.">Qtilities::ProjectManagement::ProjectManager::closeProject()</a> function.</p>
<p>To open projects is straight forward. Below is an example of how the user can be prompted to open a project file: </p>
<div class="fragment"><div class="line">QString filter = PROJECT_MANAGER-&gt;allowedProjectTypesFilter();</div>
<div class="line">QString project_path;</div>
<div class="line"><span class="keywordflow">if</span> (PROJECT_MANAGER-&gt;useCustomProjectsPath())</div>
<div class="line">    project_path = PROJECT_MANAGER-&gt;customProjectsPath();</div>
<div class="line"><span class="keywordflow">else</span></div>
<div class="line">    project_path = QCoreApplication::applicationDirPath() + tr(<span class="stringliteral">&quot;/Projects&quot;</span>);</div>
<div class="line">QString file_name = QFileDialog::getOpenFileName(0, tr(<span class="stringliteral">&quot;Open Existing Project&quot;</span>), project_path, filter);</div>
<div class="line"><span class="keywordflow">if</span> (file_name.isEmpty())</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (!PROJECT_MANAGER-&gt;isAllowedFileName(file_name))</div>
<div class="line">    file_name.append(<span class="stringliteral">&quot;.&quot;</span> + PROJECT_MANAGER-&gt;projectTypeSuffix(PROJECT_MANAGER-&gt;defaultProjectType()));</div>
<div class="line"></div>
<div class="line">PROJECT_MANAGER-&gt;openProject(file_name);</div>
</div><!-- fragment --><p>The project manager contains functions to open saved projects and it keeps track of recent project paths and names. It also implements the <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_modification_notifier.html" title="Interface which allows objects to broadcast changes made to them.">Qtilities::Core::Interfaces::IModificationNotifier</a> interface which can be used directly to control the modification state of the open project in the project manager.</p>
<h2><a class="anchor" id="project_options"></a>
Project management options</h2>
<p>The project manager provides various options on how projects must be managed. See the <a class="el" href="class_qtilities_1_1_project_management_1_1_project_manager.html" title="The ProjectManager class.">Qtilities::ProjectManagement::ProjectManager</a> class documentation for the access functions of these options. The screen shot below (taken from the <code>ObjectManagementExample</code>) shows the available settings in the project management configuration dialog:</p>
<div class="image">
<img src="project_configuration_widget.jpg" alt="project_configuration_widget.jpg"/>
<div class="caption">
Project Management Configuration Widget</div></div>
 <h2><a class="anchor" id="observer_project_items"></a>
Adding other classes as project items</h2>
<p>The <a class="el" href="class_qtilities_1_1_project_management_1_1_observer_project_item_wrapper.html" title="This class wraps Qtilities::Core::Observer as a project item.">Qtilities::ProjectManagement::ObserverProjectItemWrapper</a> class provides a wrapper which can be used to add an observer (tree) as a project item in your application. Below is an example which shows how to use this wrapper.</p>
<div class="fragment"><div class="line">Observer* observerA = <span class="keyword">new</span> Observer(<span class="stringliteral">&quot;Observer A&quot;</span>,<span class="stringliteral">&quot;Example observer&quot;</span>);</div>
<div class="line">ObserverProjectItemWrapper* project_item = <span class="keyword">new</span> ObserverProjectItemWrapper(<span class="keyword">this</span>);</div>
<div class="line">project_item-&gt;setObserverContext(observerA);</div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(project_item);</div>
</div><!-- fragment --><p><a class="el" href="class_qtilities_1_1_project_management_1_1_code_editor_project_item_wrapper.html" title="This class wraps Qtilities::CoreGui::CodeEditorWidget as a project item.">Qtilities::ProjectManagement::CodeEditorProjectItemWrapper</a> as be used in a similar way to make any <a class="el" href="class_qtilities_1_1_core_gui_1_1_code_editor_widget.html" title="A code editor widget which contains a CodeEditor.">Qtilities::CoreGui::CodeEditorWidget</a> part of a project.</p>
<h2><a class="anchor" id="project_management_plugin"></a>
The example project management plugin</h2>
<p>In the <code>QtilitiesExamples</code> project there is a project management plugin which can be built against your application (this is necessary for the plugin to know which version of the application must be used during plugin compatibility checking). For more information see the <a class="el" href="page_examples_and_plugins.html#plugins_overview">Plugins Overview</a> section of the <a class="el" href="page_examples_and_plugins.html">Examples and Plugins</a> page. </p>
</div></div><!-- contents -->
<br><table style="table-layout:auto;	margin: auto; 	border-width:0px 0px 0px 0px; 	border-color:#7F7F7F; 	width:99%;	border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES><tr><td style="align: left;width:45%"><a href="http://www.qtilities.org" title="Qtilities Website">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a></td><td style="align: center;width:10%"><a href="#top" title="Back to top">Back to top</a> </td><td style="text-align: right;width:45%">Copyright &copy; 2009-2013, Floware Computing (Pty) Ltd</tr></table><br><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
