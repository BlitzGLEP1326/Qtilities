<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: Tasking</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tasking </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  cellpadding="0" style="width:100%;
  table-layout:fixed;
	margin:0px 0px 0px 0px;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;">
<tr>
<td style="width:80%; padding:0px 5px 0px 0px; vertical-align: text-top; text-align: left"><h1 style="margin:0px; padding:0px">Overview</h1>
<p></p>
<p>Often in application development you encounter operations which takes more time that what you would like. Most of the time it is neccesarry to provide the user with some sort of indication of how long the process is going to take, and on the progress of the process.</p>
<p>This is a common problem and there are numerous ways to solve it. In Qt there are also numerous solutions, with the most common being the use of multiple threads where the GUI thread says responsive while worker threads perform the work in the background. Another, simpler approach is to do the work in the main thread and manually refresh the GUI at regular intervals using <code>QApplication::processEvents()</code>. However you decide to do it, you need to provide the user with details of the progress of the task etc.</p>
<p>Qtilities has tasking build into its core functionality and provides classes to use with your own tasks. This article discusses the approach taken to handle tasking and shows you how to use it in your applications.</p>
<p>Table of contents:</p>
<ul>
<li><a class="el" href="page_tasking.html#tasks_classes">Tasking Classes</a></li>
<li><a class="el" href="page_tasking.html#tasks_introduction">Introduction To Tasking</a><ul>
<li><a class="el" href="page_tasking.html#tasks_architecture">Tasking Architecture</a></li>
<li><a class="el" href="page_tasking.html#tasks_creating_simple_backend">A Simple Backend: QTimer</a></li>
<li><a class="el" href="page_tasking.html#tasks_simple_sub_tasks">Intermediate Steps: Sub Tasks</a></li>
</ul>
</li>
<li><a class="el" href="page_tasking.html#tasks_gui_classes">Tasking GUIs</a></li>
<li><a class="el" href="page_tasking.html#tasks_examples">Examples</a><ul>
<li><a class="el" href="page_tasking.html#tasks_simple_example">Adding A Task To An Existing Function</a></li>
<li><a class="el" href="page_tasking.html#tasks_simple_qprocess">QProcess and Tasking</a></li>
</ul>
</li>
</ul>
<p class="endtd"></p>
</td><td style="width:20%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
	margin:0px 0px 0px 0px; 
  width: 100%;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;
  background-color: #d1d3d4;">
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">First Steps</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_getting_started.html">Getting Started</a><br/>
</li>
<li><a href="page_the_basics.html">The Basics</a><br/>
</li>
<li><a href="page_examples_and_plugins.html">Examples and Plugins</a><br/>
   </li>
</ul>
</td></tr>
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Overviews</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_action_management.html">Action Management</a><br/>
</li>
<li><a href="page_tree_structures.html">Building Trees</a><br/>
</li>
<li><a href="page_debugging.html">Debugging Applications</a><br/>
</li>
<li><a href="page_extension_system.html">Extension System</a><br/>
</li>
<li><a href="page_factories.html">Factories</a><br/>
</li>
<li><a href="page_logging.html">Logging</a><br/>
</li>
<li><a href="page_modules_overview.html">Modules</a><br/>
</li>
<li><a href="page_object_management.html">Object Management</a><br/>
</li>
<li><a href="page_observers.html">Observers</a><br/>
</li>
<li><a href="page_observer_widgets.html">Observer Widgets</a><br/>
</li>
<li><a href="page_project_management.html">Project Management</a><br/>
</li>
<li><a href="page_tasking.html">Tasking</a><br/>
</li>
<li><a href="page_widget_set.html">Widget Set</a><br/>
   </li>
</ul>
</td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="tasks_classes"></a>
Tasking Classes</h1>
<p>Qtilities provides a set of classes which makes tasking in Qt applications easy. Lets look at an overview of the classes provided:</p>
<ul>
<li><a class="el" href="class_qtilities_1_1_core_1_1_task.html" title="The Task class is a ready to use implementation of the Qtilities::Core::Interfaces::ITask interface...">Qtilities::Core::Task</a> : A ready to use task in Qtilities.</li>
<li><a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_task.html" title="An interface through which you can communicate with a task. Qtilities::Core::Task is a ready to use i...">Qtilities::Core::Interfaces::ITask</a> : An interface through which you can communicate with a task. <a class="el" href="class_qtilities_1_1_core_1_1_task.html" title="The Task class is a ready to use implementation of the Qtilities::Core::Interfaces::ITask interface...">Qtilities::Core::Task</a> is a ready to use implementation of this interface.</li>
<li><a class="el" href="class_qtilities_1_1_core_1_1_task_manager.html" title="A class which represents a task manager.">Qtilities::Core::TaskManager</a> : A singleton which manages all active tasks in an application.</li>
</ul>
<p>The following GUI related tasking classes are available:</p>
<ul>
<li><a class="el" href="class_qtilities_1_1_core_gui_1_1_single_task_widget.html" title="A widget provides an overview of a single task.">Qtilities::CoreGui::SingleTaskWidget</a> : A widget which provides details and control functionality for a single task.</li>
<li><a class="el" href="class_qtilities_1_1_core_gui_1_1_task_summary_widget.html" title="A widget which provides a summary of all registered global tasks.">Qtilities::CoreGui::TaskSummaryWidget</a> : A widget which provides details of all current tasks in an application.</li>
<li><a class="el" href="class_qtilities_1_1_core_gui_1_1_task_manager_gui.html" title="A class providing static member functions to acccess and create GUIs related to task management...">Qtilities::CoreGui::TaskManagerGui</a> : A singleton which manages all GUI related needs of active tasks in an application.</li>
</ul>
<p>For more advanced tasking requirements, the following classes are provided:</p>
<ul>
<li><a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_task_container.html" title="Generic interface which provides a way for objects to expose tasks that they can perform.">Qtilities::Core::Interfaces::ITaskContainer</a> : An interface through which an object can provide information about tasks which can be perfomed by it.</li>
<li><a class="el" href="class_qtilities_1_1_core_1_1_qtilities_process.html" title="An easy to use way to launch external processes through an extended wrapper around QProcess...">Qtilities::Core::QtilitiesProcess</a> : An easy to use way to launch external processes through an extended tasking wrapper around QProcess.</li>
</ul>
<p>The <a href="namespace_qtilities_1_1_examples_1_1_tasks_example.html" class="el">Tasking Example</a> is a ready to use example showcasing the use of the above classes.</p>
<h1><a class="anchor" id="tasks_introduction"></a>
Introduction To Tasking</h1>
<p>In Qtilities all tasks must implement <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_task.html" title="An interface through which you can communicate with a task. Qtilities::Core::Task is a ready to use i...">Qtilities::Core::Interfaces::ITask</a> which serves as a standard status and control interface on a task. You can either create your own implementation of the interface or use the ready to use <a class="el" href="class_qtilities_1_1_core_1_1_task.html" title="The Task class is a ready to use implementation of the Qtilities::Core::Interfaces::ITask interface...">Qtilities::Core::Task</a> implementation.</p>
<p>For the rest of this article we will focus on the ready to use implementation: <a class="el" href="class_qtilities_1_1_core_1_1_task.html" title="The Task class is a ready to use implementation of the Qtilities::Core::Interfaces::ITask interface...">Qtilities::Core::Task</a></p>
<h2><a class="anchor" id="tasks_architecture"></a>
Tasking Architecture</h2>
<p>There are basically two directions that can be used to communicate with a task:</p>
<ul>
<li>From the application logic, for example <a class="el" href="class_qtilities_1_1_core_gui_1_1_single_task_widget.html" title="A widget provides an overview of a single task.">Qtilities::CoreGui::SingleTaskWidget</a>.</li>
<li>From the working backend process, for example <a class="el" href="class_qtilities_1_1_core_1_1_qtilities_process.html" title="An easy to use way to launch external processes through an extended wrapper around QProcess...">Qtilities::Core::QtilitiesProcess</a>.</li>
</ul>
<p>This is illustrated in the diagram below:</p>
<div class="image">
<img src="tasking.jpg" alt="tasking.jpg"/>
<div class="caption">
Tasking Architecture</div></div>
<p> From the application side <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_task.html" title="An interface through which you can communicate with a task. Qtilities::Core::Task is a ready to use i...">Qtilities::Core::Interfaces::ITask</a> provides functionality to control the task through the <code>start()</code>, <code>stop()</code>, <code>pause()</code>, <code>resume()</code> slots. Notice that you cannot complete the task from the application's side, since that is the responsibility of the working backend process. The application side can listen to signals indicating that the status of the task changed. These are <code>taskStarted()</code>, <code>taskAboutToStart()</code> etc.</p>
<p>The working backend process is responsible to control the task and keep it in sync with the work that the process is doing. The backend process sets up the task to match its own capabilities. For example, if the user can stop the task the backend process calls <code>setCanStop(true)</code> on the task before it is started. When the user stops the task the backend process needs to respond to this request by connecting an appropriate slot to the <code>stopTaskRequest()</code> signal. This will be demonstrated in the examples that follow.</p>
<p>Lastly, the backend process keeps the task in sync with its progress through functions like <code>completeSubTasks()</code>, <code>completeTask()</code> etc. The <a class="el" href="class_qtilities_1_1_core_1_1_qtilities_process.html" title="An easy to use way to launch external processes through an extended wrapper around QProcess...">Qtilities::Core::QtilitiesProcess</a> class is a good example of how to implement a more complex backend process. However, in most cases hooking up a backend process to a task is very simple. The next section demonstrates this by using a <code>QTimer</code> as a backend process.</p>
<h2><a class="anchor" id="tasks_creating_simple_backend"></a>
A Simple Backend: QTimer</h2>
<p>Before looking at the timer, lets just create a simple task to show how to create, start and complete a task: </p>
<div class="fragment"><div class="line">Task* task = <span class="keyword">new</span> Task(<span class="stringliteral">&quot;My Task&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Start the task:</span></div>
<div class="line">task-&gt;startTask();</div>
<div class="line"><span class="comment">// Complete the task:</span></div>
<div class="line">task-&gt;completeTask();</div>
<div class="line"></div>
<div class="line"><span class="keyword">delete</span> task;</div>
</div><!-- fragment --><p>In the above example you simply create a task and change its state by starting it and then completing it. The task provides a set of control and information functions which you would expect on a task. The example won't do anything usefull since the task does not represent anything at this stage.</p>
<p>This brings us to the most important thing to remember when working with <a class="el" href="class_qtilities_1_1_core_1_1_task.html" title="The Task class is a ready to use implementation of the Qtilities::Core::Interfaces::ITask interface...">Qtilities::Core::Task</a>. It is used to represent a task, it does not do any work itself. Thus, you need to first have some function/code which does some work and then let it communicate with your task while its working. Also, you need to set up your task to provide the correct set of capabilities that match the work you are doing.</p>
<p>Now lets look at the using a <code>QTimer</code> as a backend working process. Thus we will create a task as well as a <code>QTimer</code> and link them up.</p>
<div class="fragment"><div class="line"><span class="comment">// Create the task:</span></div>
<div class="line">Task* task = <span class="keyword">new</span> Task(<span class="stringliteral">&quot;Timer Task&quot;</span>);</div>
<div class="line"><span class="comment">// Create the timer:</span></div>
<div class="line">QTimer* timer = <span class="keyword">new</span> QTimer(task);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Tell the task that it can be stopped:</span></div>
<div class="line">task-&gt;setCanStop(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// We connect the the stop request to the stop() function on the timer:</span></div>
<div class="line">connect(task,SIGNAL(stopTaskRequest()),timer,SLOT(stop()));</div>
<div class="line"><span class="comment">// We also need to connect the stop request to the task&#39;s own stop function.</span></div>
<div class="line"><span class="comment">// If more things need to happen when stopping the task, connect the request</span></div>
<div class="line"><span class="comment">// to your own function which will call stopTask() at the appropriate time.</span></div>
<div class="line">connect(task,SIGNAL(stopTaskRequest()),task,SLOT(stopTask()));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Tell the task how it should manage its own lifetime:</span></div>
<div class="line"><span class="comment">// Thus: When the above timer times out, the task will automatically be destroyed.</span></div>
<div class="line">task-&gt;setTaskLifeTimeFlags(Task::LifeTimeDestroyWhenSuccessful | Task::LifeTimeDestroyWhenStopped);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Register the task in the global object pool. This line will let the task manager assign an unique task ID to the task.</span></div>
<div class="line"><span class="comment">// In GUI applications, also make Qtilities::CoreGui::TaskSummaryWidget aware that a new task was created.</span></div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(task);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Let the task know that is should be completed when the timer times out:</span></div>
<div class="line">connect(timer,SIGNAL(timeout()),task,SLOT(completeTask()));</div>
<div class="line"></div>
<div class="line"><span class="comment">// Set the interval on the timer:</span></div>
<div class="line">timer-&gt;setInterval(10000);</div>
<div class="line">timer-&gt;setSingleShot(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Starts the timer and the task:</span></div>
<div class="line">timer-&gt;start();</div>
<div class="line">task-&gt;startTask();</div>
</div><!-- fragment --><h2><a class="anchor" id="tasks_simple_sub_tasks"></a>
Intermediate Steps: Sub Tasks</h2>
<p>The above example shows a very basic usage example of some of the tasking classes provided. In many cases it is possible to calculate the number of steps which will be needed in order to complete a task. In such cases you can provide this information to the task representation class. For example:</p>
<div class="fragment"><div class="line">Task* task = <span class="keyword">new</span> Task(<span class="stringliteral">&quot;My Task&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Start the task and say that it will take 10 steps to complete:</span></div>
<div class="line">task-&gt;startTask(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Complete 10 steps on the task:</span></div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 10; i++) {</div>
<div class="line">    task-&gt;addCompletedSubTasks(1,<span class="stringliteral">&quot;Completed step &quot;</span> + QString::number(i));</div>
<div class="line">    QApplication::processEvents();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Complete the task:</span></div>
<div class="line">task-&gt;completeTask();</div>
<div class="line"></div>
<div class="line"><span class="keyword">delete</span> task;</div>
</div><!-- fragment --><p>Note that we log a message with each completed subtask. Without going into too much detail on task logging here, it is worth mentioning that each task can have a log associated with it (the case by default), however this can be disabled through the constructor of the <code>Task</code> class.</p>
<h1><a class="anchor" id="tasks_gui_classes"></a>
Tasking GUIs</h1>
<p><a class="el" href="class_qtilities_1_1_core_gui_1_1_single_task_widget.html" title="A widget provides an overview of a single task.">Qtilities::CoreGui::SingleTaskWidget</a> is the most basic tasking widget and it is used to represent a single task and can easily be constructed as follows:</p>
<div class="fragment"><div class="line">Task* task = <span class="keyword">new</span> Task(<span class="stringliteral">&quot;Timer Task&quot;</span>);</div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(task);</div>
<div class="line"></div>
<div class="line">SingleTaskWidget* task_widget = TaskManagerGui::instance()-&gt;singleTaskWidget(task-&gt;taskID());</div>
</div><!-- fragment --><p>The figure below shows a single task widget for an example task. Note that clicking on the green icon on the left of the progress bar allows you to view the log for the specific task. Also, the task widget will only show controls for the task according to the way the task was set up. In the QTimer example above we call <code>setCanStop(true)</code>, thus the single task widget will provide the ability to stop the task. If it was set to false, the red stop button would have been disabled.</p>
<div class="image">
<img src="class_singletaskwidget_screenshot.jpg" alt="class_singletaskwidget_screenshot.jpg"/>
<div class="caption">
Single Task Widget</div></div>
<p> The single task widget can be added anywhere in your application where you would like to display information about a task. However in some cases you would like to show all tasks in your application. <a class="el" href="class_qtilities_1_1_core_gui_1_1_task_summary_widget.html" title="A widget which provides a summary of all registered global tasks.">Qtilities::CoreGui::TaskSummaryWidget</a> provides this functionality and is customizable in order for your needs. It can for example only show active tasks, or all tasks (active and inactive).</p>
<p>To create a task summary widget is straight forward. For example:</p>
<div class="fragment"><div class="line">TaskSummaryWidget task_summary_widget;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Tell the widget that it should not hide itself when now active tasks are visible:</span></div>
<div class="line">task_summary_widget.setNoActiveTaskHandling(TaskSummaryWidget::ShowSummaryWidget);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Find all current tasks in the global object pool:</span></div>
<div class="line">task_summary_widget.findCurrentTasks();</div>
<div class="line"></div>
<div class="line"><span class="comment">// All tasks registered in the global object pool from here on will automatically be displayed</span></div>
<div class="line"><span class="comment">// in the summary widget.</span></div>
</div><!-- fragment --><p>It is important to note that only tasks registered in the global object pool and set as global tasks (see <a class="el" href="class_qtilities_1_1_core_1_1_interfaces_1_1_i_task.html#a1dc0ff882b6cd436dcb547c39308ff14a38f05530cc868bde25d9596522cb8c97">Qtilities::Core::Interfaces::ITask::TaskGlobal</a>) are shown in the task summary widget. The figure below shows a task summary widget which shows three active tasks. Note that the QTimer task can be stopped.</p>
<div class="image">
<img src="class_tasksummarywidget_screenshot.jpg" alt="class_tasksummarywidget_screenshot.jpg"/>
<div class="caption">
Task Summary Widget</div></div>
<p> When using <a class="el" href="class_qtilities_1_1_core_gui_1_1_qtilities_main_window.html" title="A class which can be used as a frontend of applications using the Qtilities libraries.">Qtilities::CoreGui::QtilitiesMainWindow</a> you can set it up to show a task summary information automatically for you. This makes it very easy to provide an overview of tasks in your application. The <a href="namespace_qtilities_1_1_examples_1_1_tasks_example.html" class="el">Tasking Example</a> demonstrates this:</p>
<div class="image">
<img src="example_tasking.jpg" alt="example_tasking.jpg"/>
<div class="caption">
Tasking Example</div></div>
 <h1><a class="anchor" id="tasks_examples"></a>
Examples</h1>
<p>The tasking classes provided were designed to be as generic as possible, allowing them to be used in the widest possible set of scenarios. This section shows a few additional possible usages.</p>
<h2><a class="anchor" id="tasks_simple_example"></a>
Adding A Task To An Existing Function</h2>
<p>The following example shows how to add a task to an existing slow function. This task will show up in all <a class="el" href="class_qtilities_1_1_core_gui_1_1_task_summary_widget.html" title="A widget which provides a summary of all registered global tasks.">Qtilities::CoreGui::TaskSummaryWidget</a> widgets and dissapear as soon as the task is completed (thus it goes out of scope). In this example all messages logged to the task will be logged to its own logger engine.</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyClass::slowFunction() {</div>
<div class="line">    <span class="comment">// Create a task on the stack:</span></div>
<div class="line">    Task task(<span class="stringliteral">&quot;Function Description&quot;</span>);</div>
<div class="line">    OBJECT_MANAGER-&gt;registerObject(&amp;task);</div>
<div class="line">    task.startTask();</div>
<div class="line">    QApplication::processEvents();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Existing code</span></div>
<div class="line">    QApplication::processEvents();</div>
<div class="line">    <span class="comment">// Existing code</span></div>
<div class="line">    QApplication::processEvents();</div>
<div class="line">    <span class="comment">// Existing code</span></div>
<div class="line">    QApplication::processEvents();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Note how we call processEvents() as often as possible in order for the task widgets to update.</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (function_successfull) {</div>
<div class="line">        task.logMessage(<span class="stringliteral">&quot;Successfully completed task&quot;</span>);</div>
<div class="line">        task.completeTask();</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        task.logError(<span class="stringliteral">&quot;Error message&quot;</span>);</div>
<div class="line">        task.completeTask(ITask::TaskFailed);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>It is also possible to log messages from the task as system wide messages in your application. In the next example this approach is followed (note that the task itself does not have a log anymore in this example).</p>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> MyClass::slowFunction() {</div>
<div class="line">    <span class="comment">// Create a task on the stack:</span></div>
<div class="line">    Task task(<span class="stringliteral">&quot;Function Description&quot;</span>,<span class="keyword">false</span>);</div>
<div class="line">    task.setLogContext(Logger::SystemWideMessages);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Same as previous example.</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="tasks_simple_qprocess"></a>
QProcess and Tasking</h2>
<p><a class="el" href="class_qtilities_1_1_core_1_1_qtilities_process.html" title="An easy to use way to launch external processes through an extended wrapper around QProcess...">Qtilities::Core::QtilitiesProcess</a> allows you to use QProcess as normal with a tasking wrapper around it. This is shown in the following example taken from the <a href="namespace_qtilities_1_1_examples_1_1_tasks_example.html" class="el">Tasking Example</a>.</p>
<div class="fragment"><div class="line"><span class="comment">// Information aboiut the doxyfile to use:</span></div>
<div class="line">QString fileName = <span class="stringliteral">&quot;Path to a doxyfile&quot;</span>;</div>
<div class="line">QFileInfo fi(fileName);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a new process on the heap (not on the stack!):</span></div>
<div class="line">QtilitiesProcess* process = <span class="keyword">new</span> QtilitiesProcess(<span class="stringliteral">&quot;Doxygen Generation&quot;</span>,<span class="keyword">true</span>,<span class="keyword">this</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// We acccess the QProcess instance used through process():</span></div>
<div class="line">process-&gt;process()-&gt;setWorkingDirectory(fi.dir().path());</div>
<div class="line"></div>
<div class="line"><span class="comment">// Setup the way user stop/remove actions must be handled:</span></div>
<div class="line">process-&gt;setTaskStopAction(ITask::TaskDoNothingWhenStopped);</div>
<div class="line">process-&gt;setTaskRemoveAction(ITask::TaskDeleteWhenRemoved);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Register the process (also registers the task):</span></div>
<div class="line">OBJECT_MANAGER-&gt;registerObject(process);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Start a doxygen process (note that doxygen must be installed and in your path):</span></div>
<div class="line">process-&gt;startProcess(<span class="stringliteral">&quot;Doxygen&quot;</span>,QStringList(fileName));</div>
<div class="line"></div>
<div class="line"><span class="comment">// The process will automatically be deleted when the QProcess is done.</span></div>
</div><!-- fragment --> </div></div><!-- contents -->
<br><table style="table-layout:auto;	margin: auto; 	border-width:0px 0px 0px 0px; 	border-color:#7F7F7F; 	width:99%;	border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES><tr><td style="align: left;width:45%"><a href="http://www.qtilities.org" title="Qtilities Website">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a></td><td style="align: center;width:10%"><a href="#top" title="Back to top">Back to top</a> </td><td style="text-align: right;width:45%">Copyright &copy; 2009-2013, Floware Computing (Pty) Ltd</tr></table><br><script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
