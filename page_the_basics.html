<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Qtilities: The Basics: A Simple %Qtilities Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">The Basics: A Simple Qtilities Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table  cellpadding="0" style="width:100%;
  table-layout:fixed;
	margin:0px 0px 0px 0px;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;">
<tr>
<td style="width:80%; padding:0px 5px 0px 0px; vertical-align: text-top; text-align: left"><h1 style="margin:0px; padding:0px">Overview</h1>
<p></p>
<p>The goal of this article is to introduce Qtilities to someone who has never used it before. Basic principles will be covered and a basic example is presented which demonstrates many features and concepts. This article is not intended to give an overview of the different modules, for that see <a class="el" href="page_modules_overview.html">Modules Overview</a>.</p>
<p>Table of contents:</p>
<ul>
<li><a class="el" href="page_the_basics.html#basics_constructing_application_object">Constructing your QApplication object</a></li>
<li><a class="el" href="page_the_basics.html#basics_macros">Macros made available to you</a></li>
<li><a class="el" href="page_the_basics.html#basics_includes_and_namespaces">Includes and namespaces</a></li>
<li><a class="el" href="page_the_basics.html#basics_simple_app">A basic example application</a></li>
</ul>
<p></p>
<p class="endtd"></p>
</td><td style="width:20%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
	margin:0px 0px 0px 0px; 
  width: 100%;
	border-width:0px 0px 0px 0px; 
	border-color:#7F7F7F;
  background-color: #d1d3d4;">
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">First Steps</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_getting_started.html">Getting Started</a><br/>
</li>
<li><a href="page_the_basics.html">The Basics</a><br/>
</li>
<li><a href="page_examples_and_plugins.html">Examples and Plugins</a><br/>
   </li>
</ul>
</td></tr>
<tr>
<td style="background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Overviews</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td><ul>
<li><a href="page_action_management.html">Action Management</a><br/>
</li>
<li><a href="page_tree_structures.html">Building Trees</a><br/>
</li>
<li><a href="page_debugging.html">Debugging Applications</a><br/>
</li>
<li><a href="page_extension_system.html">Extension System</a><br/>
</li>
<li><a href="page_factories.html">Factories</a><br/>
</li>
<li><a href="page_logging.html">Logging</a><br/>
</li>
<li><a href="page_modules_overview.html">Modules</a><br/>
</li>
<li><a href="page_object_management.html">Object Management</a><br/>
</li>
<li><a href="page_observers.html">Observers</a><br/>
</li>
<li><a href="page_observer_widgets.html">Observer Widgets</a><br/>
</li>
<li><a href="page_project_management.html">Project Management</a><br/>
</li>
<li><a href="page_tasking.html">Tasking</a><br/>
</li>
<li><a href="page_widget_set.html">Widget Set</a><br/>
   </li>
</ul>
</td></tr>
</table>
<p class="endtd"></p>
</td></tr>
</table>
<h1><a class="anchor" id="basics_constructing_application_object"></a>
Constructing your QApplication object</h1>
<p>A Qtilities application is just a normal Qt application with one small difference. The recommended way to construct your QApplication object is to use <a class="el" href="class_qtilities_1_1_core_gui_1_1_qtilities_application.html" title="The QtilitiesApplication class is the same as QApplication with added functionality.">Qtilities::CoreGui::QtilitiesApplication</a> which initializes some internal Qtilities features, and extends QApplication. Thus it would look something like this:</p>
<div class="fragment"><div class="line">QtilitiesApplication a(argc, argv);</div>
<div class="line"></div>
<div class="line"><span class="comment">// If you use a different class that inherits from QApplication and it is not possible to use QtilitiesApplication as shown above, it should be initialized directly after QApplication construction, as follows:</span></div>
<div class="line">QApplication a(argc, argv);</div>
<div class="line">QtilitiesApplication::initialize();</div>
</div><!-- fragment --><p>This is the only difference between a Qtilities application and a normal Qt application. If you don't use any GUI related classes, you can keep using QCoreApplication without the need to do anything different.</p>
<h1><a class="anchor" id="basics_macros"></a>
Macros made available to you</h1>
<p>When using Qtilities you have access to a set of macros. The table below provides an overview of the most important ones:</p>
<div align="center"> <table  cellpadding="0" style="width:1000px;
  table-layout:auto;
        margin:0px 0px 0px 0px;
        border-width:0px 0px 0px 0px;
        border-color:#7F7F7F;">
<tr>
<td style="width:100%; vertical-align: top; margin:0px 0px 0px 0px;"><table  style="table-layout:auto;
        margin:0px 0px 0px 0px;
  width: 100%;
        border-width:0px 0px 0px 0px;
  background-color: #d1d3d4;
        border-color:#7F7F7F;">
<tr>
<td style="width:25%; background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Object Manager</h2>
<p class="endtd"></p>
</td><td style="width:25%; background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Context Manager</h2>
<p class="endtd"></p>
</td><td style="width:25%; background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Action Manager</h2>
<p class="endtd"></p>
</td><td style="width:25%; background-color: #5a5c5e; text-align: center"><h2 style="color:#FFFFFF">Logging</h2>
<p class="endtd"></p>
</td></tr>
<tr>
<td style="vertical-align:top">The OBJECT_MANAGER macro provides object management functionality in your application. The most important feature is the global object pool in which objects can be registered either by the main application, or by plugins. For more information about the object manager see the the <a class="el" href="page_object_management.html">Object Management</a> article.  </td><td style="vertical-align:top">The CONTEXT_MANAGER macro allows management of contexts in an application. For more information about the context manager see the <a class="el" href="page_action_management.html#context_manager">The Context Manager</a> section of the <a class="el" href="page_action_management.html">Action Management</a> article.  </td><td style="vertical-align:top">The ACTION_MANAGER macro allows management of actions, shortcuts and menu related items in an application. For more information about the action manager see the <a class="el" href="page_action_management.html#action_manager">The Action Manager</a> section of the <a class="el" href="page_action_management.html">Action Management</a> article.  </td><td style="vertical-align:top">A set of logging macros are available, for more information see <a class="el" href="page_logging.html">Logging</a>.   </td></tr>
</table>
</td></tr>
</table>
</div><h1><a class="anchor" id="basics_includes_and_namespaces"></a>
Includes and namespaces</h1>
<p>In your <code></code>.pro file you need to define the Qtilities module you would like to use in your application. This will include all the needed header files and link your application to the correct libraries. The exact details to use for the different modules are provided in the <a class="el" href="page_modules_overview.html">Modules Overview</a> article. Note that all dependent Qtilities modules will be added automatically for you and details about the used dependencies are printed as output during compilation.</p>
<div class="fragment"><div class="line"><span class="comment">// In your .pro file:</span></div>
<div class="line">QTILITIES += coregui</div>
<div class="line">QTILITIES_BASE  = your_path/qtilities/trunk</div>
<div class="line">include($$QTILITIES_BASE/src/Qtilities.pri)</div>
</div><!-- fragment --><p>For the above example we set the <code>QTILITIES</code> variable to <code>coregui</code> indicating that we are using the CoreGui module, and the following will be printed during compilation:</p>
<div class="fragment"><div class="line">Project MESSAGE: Using Qtilities CoreGui module...</div>
<div class="line">Project MESSAGE: CoreGui Dependency: Using Qtilities Logging module...</div>
<div class="line">Project MESSAGE: CoreGui Dependency: Using Qtilities Core module...</div>
</div><!-- fragment --><p>In the source files where you want to use Qtilities you need to include the name of the module and then specify the namespaces we want to use. All the required namespaces of all the dependent modules will be made available through automatically. For example:</p>
<div class="fragment"><div class="line"><span class="comment">// In your source files:</span></div>
<div class="line"><span class="preprocessor">#include &lt;QtilitiesCoreGui&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>QtilitiesCoreGui;</div>
</div><!-- fragment --><h1><a class="anchor" id="basics_simple_app"></a>
A basic example application</h1>
<p>Next we will look at a basic example which you can build and play around with. The example will not do a lot but it introduces many features and concepts. To run this example, launch the <code>TheBasicsExample</code> application in the <code>QtilitiesExample</code> project.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtGui&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;QtilitiesCoreGui&gt;</span></div>
<div class="line"><span class="keyword">using namespace </span>QtilitiesCoreGui;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QtilitiesApplication a(argc, argv);</div>
<div class="line">    QtilitiesApplication::setOrganizationName(<span class="stringliteral">&quot;Jaco Naudé&quot;</span>);</div>
<div class="line">    QtilitiesApplication::setOrganizationDomain(<span class="stringliteral">&quot;Qtilities&quot;</span>);</div>
<div class="line">    QtilitiesApplication::setApplicationName(<span class="stringliteral">&quot;Simple Example&quot;</span>);</div>
<div class="line">    QtilitiesApplication::setApplicationVersion(<span class="stringliteral">&quot;1.0&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a main window for our application:</span></div>
<div class="line">    QMainWindow* main_window = <span class="keyword">new</span> QMainWindow;</div>
<div class="line">    QtilitiesApplication::setMainWindow(main_window);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create a settings window for our application:</span></div>
<div class="line">    ConfigurationWidget* config_widget = <span class="keyword">new</span> ConfigurationWidget;</div>
<div class="line">    QtilitiesApplication::setConfigWidget(config_widget);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize the application session path in QtilitiesCoreApplication.</span></div>
<div class="line">    QtilitiesApplication::applicationSessionPath();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Initialize the logger:</span></div>
<div class="line">    LOG_INITIALIZE();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Add a menu bar to our main window with a File menu:</span></div>
<div class="line">    <span class="keywordtype">bool</span> existed;</div>
<div class="line">    ActionContainer* menu_bar = ACTION_MANAGER-&gt;createMenuBar(qti_action_MENUBAR_STANDARD,existed);</div>
<div class="line">    main_window-&gt;setMenuBar(menu_bar-&gt;menuBar());</div>
<div class="line">    ActionContainer* file_menu = ACTION_MANAGER-&gt;createMenu(qti_action_FILE,existed);</div>
<div class="line">    menu_bar-&gt;addMenu(file_menu);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Our menu items will need to be associated with a context.</span></div>
<div class="line">    <span class="comment">// A good idea is to use the standard context which is always active:</span></div>
<div class="line">    QList&lt;int&gt; std_context;</div>
<div class="line">    std_context.push_front(CONTEXT_MANAGER-&gt;contextID(qti_def_CONTEXT_STANDARD));</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create File-&gt;Settings and File-&gt;Exit menu items:</span></div>
<div class="line">    Command* command = ACTION_MANAGER-&gt;registerActionPlaceHolder(qti_action_FILE_SETTINGS,QObject::tr(<span class="stringliteral">&quot;Settings&quot;</span>),QKeySequence(),std_context);</div>
<div class="line">    QObject::connect(command-&gt;action(),SIGNAL(triggered()),config_widget,SLOT(show()));</div>
<div class="line">    file_menu-&gt;addAction(command);</div>
<div class="line">    file_menu-&gt;addSeperator();</div>
<div class="line">    command = ACTION_MANAGER-&gt;registerActionPlaceHolder(qti_action_FILE_EXIT,QObject::tr(<span class="stringliteral">&quot;Exit&quot;</span>),QKeySequence(QKeySequence::Close),std_context);</div>
<div class="line">    QObject::connect(command-&gt;action(),SIGNAL(triggered()),QCoreApplication::instance(),SLOT(quit()));</div>
<div class="line">    file_menu-&gt;addAction(command);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Lets add a couple of pages to our setting page which handles shortcuts and logging in our application:</span></div>
<div class="line">    OBJECT_MANAGER-&gt;registerObject(ACTION_MANAGER-&gt;commandEditor());</div>
<div class="line">    OBJECT_MANAGER-&gt;registerObject(LoggerGui::createLoggerConfigWidget());</div>
<div class="line">    <span class="comment">// Initializing the configuration widget will search the global object pool for objects implementing IConfigPage, and automatically add them:</span></div>
<div class="line">    config_widget-&gt;initialize();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Now build an example tree which will tell all views to provide some actions for the tree items:</span></div>
<div class="line">    TreeNode* node = <span class="keyword">new</span> TreeNode(<span class="stringliteral">&quot;Root Node&quot;</span>);</div>
<div class="line">    node-&gt;displayHints()-&gt;setActionHints(ObserverHints::ActionAllHints);</div>
<div class="line">    node-&gt;displayHints()-&gt;setDisplayFlagsHint(ObserverHints::AllDisplayFlagHint);</div>
<div class="line"></div>
<div class="line">    TreeNode* nodeA = node-&gt;addNode(<span class="stringliteral">&quot;Node A&quot;</span>);</div>
<div class="line">    nodeA-&gt;displayHints()-&gt;setActionHints(ObserverHints::ActionAllHints);</div>
<div class="line">    nodeA-&gt;displayHints()-&gt;setDisplayFlagsHint(ObserverHints::AllDisplayFlagHint);</div>
<div class="line">    nodeA-&gt;addItem(<span class="stringliteral">&quot;Item 1&quot;</span>);</div>
<div class="line">    nodeA-&gt;addItem(<span class="stringliteral">&quot;Item 2&quot;</span>);</div>
<div class="line">    TreeItem* sharedItem = nodeA-&gt;addItem(<span class="stringliteral">&quot;Shared Item&quot;</span>);</div>
<div class="line"></div>
<div class="line">    TreeNode* nodeB = node-&gt;addNode(<span class="stringliteral">&quot;Node B&quot;</span>);</div>
<div class="line">    nodeB-&gt;displayHints()-&gt;setActionHints(ObserverHints::ActionPushUp | ObserverHints::ActionSwitchView);</div>
<div class="line">    nodeB-&gt;displayHints()-&gt;setDisplayFlagsHint(ObserverHints::ItemView | ObserverHints::ActionToolBar);</div>
<div class="line">    nodeB-&gt;attachSubject(sharedItem);</div>
<div class="line">    nodeB-&gt;addItem(<span class="stringliteral">&quot;Item 3&quot;</span>);</div>
<div class="line">    nodeB-&gt;addItem(<span class="stringliteral">&quot;Item 4&quot;</span>);</div>
<div class="line">    <span class="comment">// Notice we added different display hints on Node B, it will behave different.</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// We show the tree using an ObserverWidget:</span></div>
<div class="line">    ObserverWidget* tree_widget = <span class="keyword">new</span> ObserverWidget(node);</div>
<div class="line">    tree_widget-&gt;show();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Finally, set the ObserverWidget as the main window&#39;s central widget and show it:</span></div>
<div class="line">    main_window-&gt;setCentralWidget(tree_widget);</div>
<div class="line">    main_window-&gt;show();</div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --><p>This example introduced some of the core concepts in Qtilities and most of the other features uses these concepts in one way or another. For example, the <a class="el" href="class_qtilities_1_1_core_gui_1_1_observer_widget.html" title="The ObserverWidget class provides a ready-to-use widget to display information about a specific obser...">Qtilities::CoreGui::ObserverWidget</a> object in the above example automatically adds its actions to the action manager and registers their its own contexts in the context manager for these actions.</p>
<p>Now that the basics are covered check out the <a class="el" href="page_examples_and_plugins.html">Examples and Plugins</a> and take a look at some of the articles which provides in depth overviews of feature areas found in Qtilities at the <a href="#top" title="Back to top">top</a> of this page.</p>
<p>If you run into something that does not make sense, post a question on the <a href="http://groups.google.com/group/qtilities?hl=en?hl=en/">mailing list</a>. </p>
</div></div><!-- contents -->
<br><br>
<table style="table-layout:auto; margin: auto; border-width:0px 0px 0px 0px; border-color:#7F7F7F; width:99%; border-style:solid" CELLPADDING=5 RULES=ROWS FRAME=HSIDES>
<tr>
<td style="vertical-align:text-top;align:left;width:45%">
<a href="https://github.com/JPNaude/Qtilities" title="Qtilities Repository">Qtilities</a> : <a href="index.html" title="Go back to index">Reference Documentation</a>
</td>
<td align="center" style="vertical-align:text-top;align:center;width10%">
<a href="#top" title="Back to top">Back to top</a>
</td>
<td style="vertical-align:text-top;text-align:right;width:45%">
Copyright &copy; 2009-2013, Jaco Naudé
<br><br>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="VJCCMP7GUHDVA">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form>
</td>
</table>
<br>
<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-17785825-1']);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script>
